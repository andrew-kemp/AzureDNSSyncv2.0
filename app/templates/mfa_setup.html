<!DOCTYPE html>
<html>
<head>
    <title>Multi-Factor Authentication Setup</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h2>Multi-Factor Authentication Setup</h2>
        <p style="text-align:center;">Scan this QR code with your authenticator app:</p>
        <img src="{{ url_for('mfa_qr') }}" alt="MFA QR" class="qr">
        <div class="manual-secret">
            Or enter this secret manually:<br>
            <b>{{ secret }}</b>
        </div>
        <form method="post">
            <label for="mfa_code">Enter the current code from your app:</label>
            <input type="text" name="mfa_code" required autocomplete="one-time-code">
            <button type="submit">Verify</button>
        </form>
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, msg in messages %}
                <div class="alert alert-{{ category }}">{{ msg }}</div>
            {% endfor %}
        {% endif %}
        {% endwith %}
    </div>
</body>
</html>
